(function(t){function e(e){for(var n,s,r=e[0],c=e[1],d=e[2],l=0,m=[];l<r.length;l++)s=r[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&m.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,d||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],n=!0,s=1;s<o.length;s++){var c=o[s];0!==a[c]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=o[0]))}return t}var n={},a={app:0},i=[];function s(t){return r.p+"js/"+({about:"about"}[t]||t)+"."+{about:"0a8dd744"}[t]+".js"}function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.e=function(t){var e=[],o=a[t];if(0!==o)if(o)e.push(o[2]);else{var n=new Promise((function(e,n){o=a[t]=[e,n]}));e.push(o[2]=n);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=s(t);var d=new Error;i=function(e){c.onerror=c.onload=null,clearTimeout(l);var o=a[t];if(0!==o){if(o){var n=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",d.name="ChunkLoadError",d.type=n,d.request=i,o[1](d)}a[t]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(e)},r.m=t,r.c=n,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/VueTodoDemo/",r.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=d;i.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("router-view"),o("confirmation-modal",{ref:"confirmModal"})],1)},i=[],s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("transition",{attrs:{name:"fade"}},[t.isModalActive?o("div",{staticClass:"confirmation-modal"},[o("div",{staticClass:"modal-backdrop",on:{click:t.onCancel}}),o("div",{staticClass:"modal"},[o("div",{staticClass:"modal__content"},[o("div",{staticClass:"modal__header"},[o("p",[t._v("Подтвердите действие")])]),o("div",{staticClass:"modal__body"},[o("p",[t._v(t._s(t.message))])]),o("div",{staticClass:"modal__footer"},[o("button",{staticClass:"main-button button-red",on:{click:t.onCancel}},[t._v("Отменить")]),o("button",{staticClass:"main-button button-violet",on:{click:t.onConfirm}},[t._v("Принять")])])])])]):t._e()])],1)},r=[],c={data:function(){return{message:"",isModalActive:!1}},methods:{openModal:function(t){this.message=t,this.isModalActive=!0},closeModal:function(){this.isModalActive=!1},onConfirm:function(){this.closeModal(),this.$emit("confirm")},onCancel:function(){this.closeModal(),this.$emit("cancel")}},watch:{isModalActive:function(){this.isModalActive?document.body.className="is-modal-opened":document.body.className=""}}},d=c,l=o("2877"),u=Object(l["a"])(d,s,r,!1,null,null,null),m=u.exports,f={name:"App",created:function(){var t=localStorage.getItem("store_state");null!==t&&this.$store.commit("loadStorageData",t)},components:{ConfirmationModal:m}},h=f,v=(o("5c0b"),Object(l["a"])(h,a,i,!1,null,null,null)),p=v.exports,C=(o("d3b7"),o("8c4f")),_=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"home-page"},[o("div",{staticClass:"notes"},t._l(t.notes,(function(e,n){return o("div",{key:n,staticClass:"note"},[o("div",{staticClass:"note__header"},[o("p",{staticClass:"note__title"},[t._v(t._s(e.name))]),o("div",{staticClass:"note__remove",on:{click:function(o){return t.removeNote(e.id)}}})]),o("div",{staticClass:"note__todo",class:{many:e.todo.length>4}},t._l(e.todo,(function(e,n){return o("div",{key:n,staticClass:"todo-item",class:{completed:e.isComplete}},[o("div",{staticClass:"todo-item__checkbox"},[o("div",{staticClass:"main-checkbox"},[o("label",[o("input",{attrs:{type:"checkbox",disabled:""},domProps:{checked:e.isComplete}}),o("span",{staticClass:"checkmark"},[t._v("✓")])])])]),o("p",{staticClass:"todo-item__name"},[t._v(t._s(e.taskDescription))])])})),0),o("div",{staticClass:"note__edit"},[o("router-link",{staticClass:"main-button button-violet",attrs:{to:{path:"/edit/"+e.id}}},[t._v(" Изменить заметку ")])],1)])})),0),o("div",{staticClass:"add-note"},[o("button",{staticClass:"main-button button-violet",on:{click:function(e){t.addNoteModalActive=!0}}},[o("span",[t._v("+")]),t._v(" Добавить новую заметку ")])]),o("add-note-modal",{attrs:{"is-modal-active":t.addNoteModalActive},on:{closeModal:function(e){t.addNoteModalActive=!1}}})],1)},b=[],g=(o("7db0"),o("b0c0"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("transition",{attrs:{name:"fade"}},[t.isModalActive?o("div",{staticClass:"add-note-modal"},[o("div",{staticClass:"modal-backdrop",on:{click:t.closeModal}}),o("div",{staticClass:"modal modal_large"},[o("div",{staticClass:"modal__content"},[o("div",{staticClass:"modal__header"},[o("p",[t._v("Добавить заметку")])]),o("div",{staticClass:"modal__body"},[o("note-form",{ref:"noteForm",on:{formConfirmed:t.closeModal}})],1),o("div",{staticClass:"modal__footer"},[o("button",{staticClass:"main-button button-violet",on:{click:t.onConfirm}},[t._v("Сохранить")])])])])]):t._e()])],1)}),N=[],y=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("form",{staticClass:"main-form",on:{submit:function(e){return e.preventDefault(),t.onConfirm(e)}}},[o("div",{staticClass:"form-control",class:{"is-error":"noteName"in t.errors}},[o("label",{attrs:{for:"note-name"}},[t._v("Название заметки")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.noteName,expression:"noteName"}],attrs:{type:"text",id:"note-name"},domProps:{value:t.noteName},on:{input:function(e){e.target.composing||(t.noteName=e.target.value)}}})]),o("p",{staticClass:"main-form__title"},[t._v("Список задач")]),o("div",{staticClass:"form-todo"},t._l(t.todo,(function(e,n){return o("div",{key:n,staticClass:"todo-item",class:{completed:e.isComplete}},[o("div",{staticClass:"todo-item__checkbox"},[o("div",{staticClass:"main-checkbox"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.isComplete,expression:"item.isComplete"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isComplete)?t._i(e.isComplete,null)>-1:e.isComplete},on:{change:function(o){var n=e.isComplete,a=o.target,i=!!a.checked;if(Array.isArray(n)){var s=null,r=t._i(n,s);a.checked?r<0&&t.$set(e,"isComplete",n.concat([s])):r>-1&&t.$set(e,"isComplete",n.slice(0,r).concat(n.slice(r+1)))}else t.$set(e,"isComplete",i)}}}),o("span",{staticClass:"checkmark"},[t._v("✓")])])])]),o("div",{staticClass:"todo-item__name",class:{"is-error":Object.keys(t.errors).length>0&&""===e.taskDescription}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.taskDescription,expression:"item.taskDescription"}],attrs:{type:"text"},domProps:{value:e.taskDescription},on:{input:function(o){o.target.composing||t.$set(e,"taskDescription",o.target.value)}}})]),o("div",{staticClass:"todo-item__remove",on:{click:function(e){return t.todo.splice(n,1)}}},[o("span")])])})),0),o("div",{staticClass:"add-todo-item"},[o("span",{staticClass:"main-button button-violet small",on:{click:t.addTodoItem}},[o("span",[t._v("+")]),t._v(" Добавить задачу")])])]),Object.keys(t.errors).length>0?o("div",{staticClass:"form-errors"},[o("p",{staticClass:"form-errors__title"},[t._v("Ошибки:")]),o("p"),t._l(t.errors,(function(e,n){return o("ul",{key:n},t._l(e,(function(e,n){return o("li",{key:n},[t._v(t._s(e))])})),0)}))],2):t._e()])},k=[],M=(o("a9e3"),{name:"NoteForm",props:{id:{type:Number,default:NaN}},data:function(){return{noteName:"",todo:[{taskDescription:"New Task",isComplete:!1}],validations:{noteName:{name:"Название заметки",required:!0,maxLength:255},todo:{name:"Задачи",minArrayLength:1,maxArrayLength:30,arrayFieldsRequired:!0}}}},created:function(){isNaN(this.id)||this.getNoteById(this.id)},computed:{cachedNote:function(){return this.$store.getters.getCachedNode}},methods:{getNoteById:function(t){var e=this.$store.getters.getNoteById(t);this.noteName=e.name,this.todo=e.todo},addTodoItem:function(){this.todo.push({taskDescription:"New Task",isComplete:!1})},loadCached:function(){this.cachedNote.id===this.id&&(this.noteName=this.cachedNote.name,this.todo=this.cachedNote.todo)},cancelChanges:function(){var t=JSON.parse(JSON.stringify({id:this.id,name:this.noteName,todo:this.todo}));this.changeStoreState("cacheChanges",t),this.getNoteById(this.id)},onConfirm:function(){""===this.noteName&&(this.errors.noteName=!0),0===this.todo.length&&(this.errors.todo=!0),this.validateData(),this.errors.noteName||this.errors.todo||(isNaN(this.id)?(this.changeStoreState("addNote",{name:this.noteName,todo:this.todo}),this.noteName="",this.todo=[],this.$emit("formConfirmed")):(this.changeStoreState("updateNote",{id:this.id,name:this.noteName,todo:this.todo}),this.$router.push("/")))}}}),x=M,S=Object(l["a"])(x,y,k,!1,null,null,null),$=S.exports,A={name:"AddNoteModal",props:{isModalActive:{type:Boolean,default:!1}},methods:{closeModal:function(){this.$emit("closeModal")},onConfirm:function(){this.$refs.noteForm.onConfirm()}},components:{NoteForm:$}},w=A,O=Object(l["a"])(w,g,N,!1,null,null,null),E=O.exports,D={name:"Home",data:function(){return{addNoteModalActive:!1}},methods:{removeNote:function(t){var e=this,o=this.notes.find((function(e){return e.id===t}));this.modalConfirm("Вы уверены что хотите удалить заметку ".concat(o.name," ?")).then((function(){e.changeStoreState("removeNote",o.id)})).catch((function(){return!1}))},addNote:function(){this.addNoteModalActive=!0}},computed:{notes:function(){return this.$store.getters.getAllNodes}},components:{AddNoteModal:E},watch:{addNoteModalActive:function(){this.addNoteModalActive?document.body.className="is-modal-opened":document.body.className=""}}},j=D,T=Object(l["a"])(j,_,b,!1,null,null,null),I=T.exports,P=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"edit-note-page"},[o("div",{staticClass:"page-form"},[o("note-form",{ref:"noteForm",attrs:{id:t.noteId}}),o("div",{staticClass:"page-form__buttons"},[o("div",{staticClass:"row"},[o("button",{staticClass:"main-button button-violet",on:{click:t.saveNote}},[t._v("Сохранить")]),o("button",{staticClass:"main-button button-red",on:{click:t.cancelEditing}},[t._v("Отменить редактирование")])]),o("div",{staticClass:"row"},[o("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.cancelChanges(e)}}},[t._v("↶"),o("span",{staticClass:"hidden-mobile"},[t._v(" Отменить внесенное изменение")])]),o("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.redoChanges(e)}}},[t._v("↷"),o("span",{staticClass:"hidden-mobile"},[t._v(" повторить отмененное изменение")])]),o("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.removeNote(e)}}},[t._v("🗑"),o("span",{staticClass:"hidden-mobile"},[t._v(" удалить")])])])])],1)])},F=[],L={data:function(){return{}},methods:{redoChanges:function(){this.$refs.noteForm.loadCached()},saveNote:function(){this.$refs.noteForm.onConfirm()},cancelChanges:function(){this.$refs.noteForm.cancelChanges()},cancelEditing:function(){var t=this;this.modalConfirm("Вы уверены что хотите отменить редактирование и вернуться обратно?").then((function(){t.$router.push("/")})).catch((function(){return!1}))},removeNote:function(){var t=this;this.modalConfirm("Вы уверены что хотите удалить эту заметку?").then((function(){t.changeStoreState("removeNote",t.noteId),t.$router.push("/")})).catch((function(){return!1}))}},computed:{noteId:function(){return Number(this.$route.params.id)}},components:{NoteForm:$}},J=L,B=Object(l["a"])(J,P,F,!1,null,null,null),q=B.exports;n["a"].use(C["a"]);var R=[{path:"/",name:"Home",component:I},{path:"/edit/:id",name:"EditNote",component:q},{path:"/about",name:"About",component:function(){return o.e("about").then(o.bind(null,"f820"))}}],H=new C["a"]({mode:"history",base:"/VueTodoDemo/",routes:R}),V=H,z=(o("99af"),o("c740"),o("d81d"),o("a434"),o("96cf"),o("1da1")),G=o("2909"),K=o("2f62");n["a"].use(K["a"]);var Q=new K["a"].Store({state:{cachedNote:{},notes:[{id:0,name:"Some name 1",todo:[{taskDescription:"Task 1",isComplete:!1},{taskDescription:"Task 2",isComplete:!0}]},{id:1,name:"Some name 2",todo:[{taskDescription:"Task 3",isComplete:!1},{taskDescription:"Task 4",isComplete:!1}]}]},mutations:{updateNote:function(t,e){var o=t.notes.findIndex((function(t){return t.id===e.id}));t.notes[o]={id:e.id,name:e.name,todo:e.todo}},addNote:function(t,e){var o=0;t.notes.map((function(t){t.id>o&&(o=t.id)})),t.notes.push({id:++o,name:e.name,todo:e.todo})},removeNote:function(t,e){var o=t.notes.findIndex((function(t){return t.id===e}));t.notes.splice(o,1)},cacheChanges:function(t,e){t.cachedNote=e},loadStorageData:function(t,e){var o,n=JSON.parse(e);(o=t.notes).splice.apply(o,[0,t.notes.length].concat(Object(G["a"])(n)))}},getters:{getNoteById:function(t){return function(e){var o=t.notes.findIndex((function(t){return t.id===e}));return JSON.parse(JSON.stringify(t.notes[o]))}},getAllNodes:function(t){return t.notes},getCachedNode:function(t){return t.cachedNote}},actions:{SET_STATE:function(){var t=Object(z["a"])(regeneratorRuntime.mark((function t(e,o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.commit(o.commit,o.payload);case 1:case"end":return t.stop()}}),t)})));function e(e,o){return t.apply(this,arguments)}return e}()}}),U={methods:{modalConfirm:function(t){var e=this.$root.$children[0].$refs.confirmModal;return e.openModal(t),new Promise((function(t,o){e.$on("confirm",(function(){e.closeModal(),t()})),e.$on("cancel",(function(){e.closeModal(),o(new Error)}))}))}}},W=(o("4160"),o("159b"),{data:function(){return{errors:{}}},methods:{addError:function(t,e){t in this.errors?this.errors[t].push(e):this.errors[t]=[e]},validateData:function(){var t=this;this.errors={};var e=function(e){for(var o in t.validations[e])"required"===o&&t.validations[e][o]&&""===t[e]&&t.addError(e,'Поле "'.concat(t.validations[e].name,'" обязательное для заполнения')),"minLength"===o&&t[e].length<t.validations[e][o]&&t.addError(e,'Поле "'.concat(t.validations[e].name,'" должно содержать минимум ').concat(t.validations[e][o]," символов")),"maxLength"===o&&t[e].length>t.validations[e][o]&&t.addError(e,'Поле "'.concat(t.validations[e].name,'" не должно содержать больше ').concat(t.validations[e][o]," символов")),"minArrayLength"===o&&t[e].length<t.validations[e][o]&&t.addError(e,'В списке "'.concat(t.validations[e].name,'" не должно быть меньше ').concat(t.validations[e][o]," элементов")),"maxArrayLength"===o&&t[e].length>t.validations[e][o]&&t.addError(e,'В списке "'.concat(t.validations[e].name,'" не должно быть больше ').concat(t.validations[e][o]," элементов")),"arrayFieldsRequired"===o&&t[e].forEach((function(o){for(var n in o)if(""===o[n]){t.addError(e,'Поля списке "'.concat(t.validations[e].name,'" обязательны для заполнения'));break}}))};for(var o in this.validations)e(o);return this.errors}}}),X={methods:{changeStoreState:function(t,e){var o=this;this.$store.dispatch("SET_STATE",{commit:t,payload:e}).then((function(){localStorage.setItem("store_state",JSON.stringify(o.$store.state.notes))}))}}};n["a"].config.productionTip=!1,n["a"].mixin(U),n["a"].mixin(W),n["a"].mixin(X),new n["a"]({router:V,store:Q,render:function(t){return t(p)}}).$mount("#app")},"5c0b":function(t,e,o){"use strict";var n=o("9c0c"),a=o.n(n);a.a},"9c0c":function(t,e,o){}});
//# sourceMappingURL=app.8eaeab55.js.map